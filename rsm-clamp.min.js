/*
 rsm-clamp.js 0.5.1

 Released under the WTFPL license
 http://sam.zoy.org/wtfpl/

 @author tbd-rsm https://github.com/tbd-rsm

 Forked from https://github.com/josephschmitt/Clamp.js by Joseph Schmitt.
*/
(function(){window.$clamp=function(c,d){function t(a,b){m.getComputedStyle||(m.getComputedStyle=function(a,b){this.el=a;this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;"float"==b&&(b="styleFloat");c.test(b)&&(b=b.replace(c,function(a,b,c){return c.toUpperCase()}));return a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null};return this});return m.getComputedStyle(a,null).getPropertyValue(b)}function u(a){a=a||c.clientHeight;var b=v(c);return Math.max(Math.floor(a/b),0)}function y(a){return v(c)*
a}function v(a){var b=t(a,"line-height");"normal"==b&&(b=1.2*parseInt(t(a,"font-size")));return parseInt(b)}function l(a){if(a.lastChild.children&&0<a.lastChild.children.length)return l(Array.prototype.slice.call(a.children).pop());if(a.lastChild&&a.lastChild.nodeValue&&""!=a.lastChild.nodeValue&&a.lastChild.nodeValue!=b.truncationChar)return a.lastChild;a.lastChild.parentNode.removeChild(a.lastChild);return l(c)}function n(a,d){if(d){var e=a.nodeValue.replace(b.truncationChar,"");f||(h=0<k.length?
k.shift():"",f=e.split(h));1<f.length?(p=f.pop(),q(a,f.join(h))):f=null;if(r){a.nodeValue=a.nodeValue.replace(b.truncationChar,"");if(a.parentNode)try{c.removeChild(a)}catch(B){}c.innerHTML=a.nodeValue+" "+r.innerHTML+b.truncationChar}if(f){if(c.clientHeight<=d)if(0<=k.length&&""!=h)q(a,f.join(h)+h+p),f=null;else return c.innerHTML}else""==h&&(q(a,""),a=l(c),k=b.splitOnChars.slice(0),h=k[0],p=f=null);if(b.animate)setTimeout(function(){n(a,d)},!0===b.animate?10:b.animate);else return n(a,d)}}function q(a,
c){a.nodeValue=c+b.truncationChar}d=d||{};var m=window,b={clamp:d.clamp||2,useNativeClamp:"undefined"!=typeof d.useNativeClamp?d.useNativeClamp:!0,splitOnChars:d.splitOnChars||[".","-","\u2013","\u2014"," "],animate:d.animate||!1,truncationChar:d.truncationChar||"\u2026",truncationHTML:d.truncationHTML},e=c.style,z=c.innerHTML,A="undefined"!=typeof c.style.webkitLineClamp,g=b.clamp,w=g.indexOf&&(-1<g.indexOf("px")||-1<g.indexOf("em"));if(b.truncationHTML){var r=document.createElement("span");r.innerHTML=
b.truncationHTML}var k=b.splitOnChars.slice(0),h=k[0],f,p;"auto"==g?g=u():w&&(g=u(parseInt(g)));var x;A&&b.useNativeClamp?(e.overflow="hidden",e.textOverflow="ellipsis",e.webkitBoxOrient="vertical",e.display="-webkit-box",e.webkitLineClamp=g,w&&(e.height=b.clamp+"px")):(e=y(g),e<=c.clientHeight&&(x=n(l(c),e)));return{original:z,clamped:x}}})();
